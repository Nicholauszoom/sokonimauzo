<div class="YRrCJSr_j5nopfm4duUc XYChh_GyxXGwI9NMA1Ww R0X5VtiZIoV7IjvrxBJ_ dGKzfMAd6n2iS7Kmq6Ow"  onload="getLocation();">
{{ form_start(form) }}
    {# {{ form_widget(form) }} #}

     {{ form_row(form.title)}}
       {{ form_row(form.description)}}
       {{ form_row(form.imagePath)}}
       {# {{ form_row(form.infrastructure)}} #}
       {{ form_row(form.building)}}
       {{ form_row(form.classroom)}}

         {# <button type="button" id="capture-button">Take picture</button>
           {{ form_row(form.cameraImage, {'label': 'Preview'}) }} #}
         {{ form_row(form.office)}}

         {# capture image #}
           <video id="camera-stream" autoplay></video>
    <button id="capture-button ">Capture</button>
    {{ form_widget(form.imageData) }}
    {# {{ form_widget(form.imageFile) }} #}

             {# {{ form_row(form.time)}} #}
          {{ form_row(form.user)}}

          

    {# <button type="button" id="get-location-btn">Get Location</button> #}
         {{ form_row(form.latitude)}}
        {{ form_row(form.longitude)}}
       
         {# {{ form_row(form.submit)}} #}

         

    {# end capture image #}
      
      
    {# <button  class="btn-circle btn-lg btn-cyan float-end text-white"> #}
     <button type="submit" class="mt-5 y6GKdvUrd7vp_pxsFb57 g40_g3BQzYCOX5eZADgY YoPCmQ0E_V5W0GGmSIdm _dylIDxYTN3qgvD4U597 KmgKPWh7pHX4ztLneO0T ezMFUVl744lvw6ht0lFe mveJTCIb2WII7J4sY22F c8dCx6gnV43hTOLV6ks5 ZjWEEmDsdPvU2GdH53LK cexDVMRjens2nRrMcG96 ijrOHNoSVGATsWYKl4Id _k0lTW0vvzboctTxDi2R Q_jg_EPdNf9eDMn1mLI2 Nm7xMnguzOx6J5Ao7yCU t6gkcSf0Bt4MLItXvDJ_ icxWjIgUd9_dzYucx1nx R9nujHypnXyuHrBww9QK d8_fVOcgDmbt7UdpfeLK WuKugQzwTT7o1wwBck2R _ZsTMX_gz275093orLWM">
                <svg class="ADSeKHR1DvUUA48Chci_ rxe6apEJoEk8r75xaVNG fhCwost7CSNRc2WSHLFW ZEPNZzATe5nPnS0shmrF" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"></path></svg>
                Send
            </button>

     

        {# {{ button_label|default('') }}
        <i class="mdi mdi-send fs-3"></i
    </button> #}

   
{{ form_end(form) }}

<script>
function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else {
    alert("Geolocation is not supported by this browser.");
  }
}

function showPosition(position) {
 
   var longitude = position.coords.longitude;
   var latitude = position.coords.latitude;
    console.log(longitude);
    console.log(latitude);
        document.getElementById("messages_longitude").value = longitude;
        document.getElementById("messages_latitude").value = latitude;
}

document.addEventListener("DOMContentLoaded", function(event) {
  getLocation();
});
</script>


<script>
    // JavaScript code to access the device camera and capture the image

    // JavaScript code
const videoElement = document.getElementById('camera-stream');
const captureButton = document.getElementById('capture-button');
const imageDataField = document.getElementById('my_form_imageData');

// Access the device camera and display the stream
navigator.mediaDevices.getUserMedia({ video: true })
    .then(stream => {
        videoElement.srcObject = stream;
    })
    .catch(error => {
        console.error('Error accessing the camera:', error);
    });

// Capture the image from the camera and assign the base64-encoded data to the form field
captureButton.addEventListener('click', () => {
    const canvas = document.createElement('canvas');
    const context = canvas.getContext('2d');

    // Set canvas dimensions to match the video stream
    canvas.width = videoElement.videoWidth;
    canvas.height = videoElement.videoHeight;

    // Draw the video frame on the canvas
    context.drawImage(videoElement, 0, 0, canvas.width, canvas.height);

    // Get the base64-encoded data from the canvas
    const imageData = canvas.toDataURL('image/jpeg');

    // Assign the image data to the form field
    imageDataField.value = imageData;
});
</script>




</div>
